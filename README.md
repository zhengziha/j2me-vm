# J2ME Virtual Machine (J2ME-VM)

ä¸€ä¸ªè½»é‡çº§çš„ã€è·¨å¹³å°çš„ J2ME (Java 2 Micro Edition) æ¨¡æ‹Ÿå™¨ï¼Œæ—¨åœ¨æ— éœ€å®‰è£… JRE å³å¯è¿è¡Œ J2ME æ¸¸æˆå’Œåº”ç”¨ã€‚æœ¬é¡¹ç›®é‡‡ç”¨ç°ä»£ C++17 ç¼–å†™ï¼Œæ ¸å¿ƒç»„ä»¶è‡ªç ”ï¼Œè‡´åŠ›äºæä¾›é«˜æ€§èƒ½å’Œæ˜“ç§»æ¤æ€§ã€‚

## ğŸš€ é¡¹ç›®ç‰¹æ€§

*   **é›¶ä¾èµ–**: æ ¸å¿ƒè™šæ‹Ÿæœºå®Œå…¨è‡ªåŒ…å«ï¼Œä¸ä¾èµ–å¤–éƒ¨ JVMã€‚
*   **è·¨å¹³å°**: åŸºäº SDL2 å¼€å‘ï¼Œæ”¯æŒ Windows, macOS, Linuxã€‚
*   **æ ¸å¿ƒåŠŸèƒ½**:
    *   å®Œæ•´çš„ç±»åŠ è½½å™¨ (`ClassLoader`)ï¼Œæ”¯æŒ `.jar` å’Œ `.class` æ–‡ä»¶ã€‚
    *   é«˜æ•ˆçš„å­—èŠ‚ç è§£é‡Šå™¨ (`Interpreter`)ï¼Œé‡‡ç”¨ Dispatch Table è®¾è®¡æ¨¡å¼ã€‚
    *   å¤šçº¿ç¨‹æ”¯æŒ (`ThreadManager`)ï¼Œæ¨¡æ‹Ÿ Java çº¿ç¨‹æ¨¡å‹ã€‚
    *   æœ¬åœ°æ–¹æ³•æ¥å£ (Native Interface)ï¼Œæ”¯æŒ CLDC å’Œ MIDP åº“ã€‚
*   **å›¾å½¢ä¸äº¤äº’**:
    *   æ”¯æŒ `javax.microedition.lcdui` å›¾å½¢åº“ (Canvas, Graphics, Image)ã€‚
    *   æ”¯æŒé”®ç›˜è¾“å…¥æ˜ å°„ã€‚

## ğŸ“‚ ç›®å½•ç»“æ„

```
j2me-vm/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/               # è™šæ‹Ÿæœºæ ¸å¿ƒ (è§£é‡Šå™¨, å†…å­˜ç®¡ç†, çº¿ç¨‹)
â”‚   â”œâ”€â”€ loader/             # ç±»åŠ è½½å™¨ & JAR å¤„ç†
â”‚   â”œâ”€â”€ native/             # æœ¬åœ°æ–¹æ³•å®ç° (J2ME API)
â”‚   â”œâ”€â”€ platform/           # å¹³å°æŠ½è±¡å±‚ (SDL2 å°è£…)
â”‚   â””â”€â”€ util/               # å·¥å…·ç±»
â”œâ”€â”€ stubs/                  # J2ME æ ‡å‡†åº“æ¥å£å®šä¹‰ (Java æºç )
â”œâ”€â”€ docs/                   # å¼€å‘æ–‡æ¡£ & è®¾è®¡è¯´æ˜
â”œâ”€â”€ tests/                  # æµ‹è¯•ç”¨ä¾‹
â””â”€â”€ CMakeLists.txt          # æ„å»ºé…ç½®
```

## ğŸ› ï¸ æ„å»ºä¸è¿è¡Œ

### å‰ç½®æ¡ä»¶

*   C++17 å…¼å®¹çš„ç¼–è¯‘å™¨ (Clang, GCC, MSVC)
*   CMake 3.10+
*   SDL2 å¼€å‘åº“

### æ„å»ºæ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd j2me-vm

# 2. ç¼–è¯‘ J2ME æ ‡å‡†åº“ (rt.jar)
./build_rt_jar.sh

# 3. ç¼–è¯‘è™šæ‹Ÿæœº
./build.sh
```

### è¿è¡Œ

è¿è¡Œä¸€ä¸ª JAR æ–‡ä»¶ï¼š

```bash
./build/j2me-vm -cp rt.jar <path_to_jar> <MainClass>
```

ä¾‹å¦‚è¿è¡Œ `tests/pal.jar` (ä»™å‰‘å¥‡ä¾ ä¼ ):

```bash
./build/j2me-vm -cp rt.jar:tests/pal.jar pal.GameMIDlet
```

## ğŸ“š æ–‡æ¡£

è¯¦ç»†çš„å¼€å‘æ–‡æ¡£è¯·å‚è€ƒ `docs/` ç›®å½•ï¼š

*   [æ¶æ„è®¾è®¡ (Architecture)](docs/ARCHITECTURE.md): è™šæ‹Ÿæœºçš„æ•´ä½“æ¶æ„ä¸è®¾è®¡ç†å¿µã€‚
*   [è§£é‡Šå™¨é‡æ„ (Interpreter Refactoring)](docs/Refactoring%20Interpreter.cpp.md): è§£é‡Šå™¨æ ¸å¿ƒçš„é‡æ„ç»†èŠ‚ã€‚
*   [å®ç°è®¡åˆ’ (Implementation Plans)](docs/): å„é˜¶æ®µçš„å¼€å‘è®¡åˆ’ä¸è¿›åº¦ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
